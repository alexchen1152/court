<!doctype html>
<html lang="" data-pagefind-ignore="true">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Search Term revenue recognition, | Card Connect, LLC v. Shift4 Payments, LLC</title>
		<meta name="description" content="">
		<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
		<style>
			/* css/index.css */

/* --- 1. Global Styles & Variables --- */
:root {
	--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
	--font-family-monospace: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
	--color-text: #222;
	--color-primary: #003366;
	--color-link: #0056b3;
	--color-border: #d1d5db;
	--color-background-light: #f8f9fa;
}

/* --- 2. Base & Body --- */
body { font-family: var(--font-family); line-height: 1.6; color: var(--color-text); margin: 0; padding: 0; background-color: #fff; }
main { max-width: 900px; margin: 2rem auto; padding: 0 1rem; }

/* --- 3. Typography --- */
h1, h2, h3, h4 { font-weight: 600; line-height: 1.2; color: var(--color-primary); }
h1 { font-size: 2em; }
h2 { font-size: 1.5em; margin-top: 2.5rem; }
h3 { font-size: 1.25em; }
a { color: var(--color-link); text-decoration: none; }
a:hover { text-decoration: underline; }
hr { border: none; border-top: 1px solid var(--color-border); margin: 2rem 0; }
blockquote { margin-left: 0; padding-left: 1.5rem; border-left: 3px solid var(--color-primary); font-style: italic; color: #555; }

/* --- 4. Header --- */
.site-header {
  padding: 1rem 1.5rem;
  border-bottom: 2px solid var(--color-primary);
  display: flex;
  justify-content: flex-start;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  left: 0;
  right: 0;
  z-index: 900;
  background-color: #fff;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
.site-header .home-link { font-size: 1.25em; font-weight: bold; color: var(--color-primary); text-decoration: none; }

.header-actions {
  margin-left: auto;
}
.download-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background-color: var(--color-primary);
  color: #fff;
  font-size: 0.9em;
  font-weight: 500;
  text-decoration: none;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  border: 1px solid transparent;
  transition: all 0.2s ease;
}
.download-button:hover {
  background-color: #fff;
  color: var(--color-primary);
  border-color: var(--color-primary);
}
.download-button .icon { font-size: 1.2em; line-height: 1; }

/* --- 5. SEARCH STYLES --- */
.search-wrapper { position: relative; flex-grow: 1; max-width: 350px; }
.search-container { width: 100%; }
.search-wrapper.search-active {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 999;
  background-color: rgba(24, 32, 42, 0.7); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);
  display: flex; justify-content: center; padding-top: 10vh; padding-left: 1rem; padding-right: 1rem;
  box-sizing: border-box; max-height: 70vh; overflow-y: auto;
}
body.search-overlay-open { overflow: hidden; }
.search-wrapper.search-active .search-container { width: 100%; max-width: 900px; height: min-content; }
.search-wrapper.search-active .pagefind-ui__sub-results { margin-top: 4px; border-radius: 4px; border: 1px solid var(--color-border); }
.search-close-button {
  display: none; position: absolute; top: 1.5rem; right: 2rem; background: none; border: none;
  font-size: 2.5rem; line-height: 1; color: rgba(255, 255, 255, 0.7); cursor: pointer; transition: color 0.2s ease;
}
.search-close-button:hover { color: #fff; }
.search-wrapper.search-active .search-close-button { display: block; }

/* --- 6. Tables & Filtering --- */
.table-container { overflow-x: auto; border: 1px solid var(--color-border); border-radius: 4px; }
main table { width: 100%; border-collapse: collapse; }
main table thead { position: -webkit-sticky; position: sticky; top: 0; z-index: 10; }
main th, main td { padding: 0.8rem 1rem; text-align: left; border-bottom: 1px solid var(--color-border); vertical-align: top; }
main tr:last-child th, main tr:last-child td { border-bottom: none; }
main th { font-weight: 600; background-color: var(--color-background-light); }
.no-results-row td { text-align: center; font-style: italic; color: #666; padding: 2rem; }

.table-actions-header {
  display: flex; justify-content: flex-start; align-items: center;
  margin-bottom: 1em; flex-wrap: wrap; gap: 1em;
}
.table-filter { flex-grow: 1; }
#exhibit-filter { width: 100%; padding: 0.75rem 1rem; font-size: 1rem; border: 1px solid var(--color-border); border-radius: 4px; box-sizing: border-box; }
#exhibit-filter:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 2px rgba(0, 51, 102, 0.2); }

.status-filter-container { display: flex; align-items: center; gap: 0.5em; }
.status-filter-container label { font-size: 0.9em; color: #555; white-space: nowrap; }
#status-filter { padding: 0.4em; border-radius: 4px; border: 1px solid var(--color-border); background-color: white; }

.secondary-button {
  padding: 0.5em 1em; border: 1px solid #ccc; background-color: #f0f0f0;
  border-radius: 4px; cursor: pointer;
}
.secondary-button:hover:not(:disabled) { background-color: #e0e0e0; }
.secondary-button:disabled { cursor: not-allowed; opacity: 0.6; }

.reviewed-col { width: 80px; text-align: center; vertical-align: middle; }
.reviewed-checkbox { width: 1.3em; height: 1.3em; cursor: pointer; }

/* --- 7. Code Block Styling --- */
code { font-family: var(--font-family-monospace); font-size: 0.9em; background-color: var(--color-background-light); padding: 0.2em 0.4em; border-radius: 3px; }
pre { background-color: var(--color-background-light); border: 1px solid var(--color-border); border-radius: 4px; padding: 1rem; line-height: 1.45; overflow-x: auto; white-space: pre-wrap; overflow-wrap: break-word; }
pre code { background-color: transparent; padding: 0; font-size: 1em; }

/* --- 8. Exhibit Page Specific Styles --- */
.exhibit-meta { 
  background-color: var(--color-background-light); 
  padding: 1.5rem; 
  border-radius: 4px; 
  margin-bottom: 2rem; 
  /* display: flex; REMOVED from this parent element */
}
.exhibit-meta h2 { margin-top: 0; }
.exhibit-meta p { margin-bottom: 0; }

/* NEW: This is now the flex container for the top row */
.exhibit-meta-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1.5rem; /* Added a slightly larger gap */
}

/* NEW: This is the container for the title/info on the left */
.exhibit-main-info {
  flex-grow: 1; /* This allows the title to take up available space and wrap */
}

/* UPDATED: This CSS for the actions block is perfect as-is */
.page-actions {
  display: flex;
  flex-direction: column;
  align-items: flex-end; /* Aligns buttons to the right */
  flex-shrink: 0; /* Prevents this block from shrinking */
  gap: 8px; /* Adds a small vertical gap between buttons */
}
.print-button {
  background-color: transparent; border: 1px solid var(--color-border); border-radius: 4px; padding: 0.4rem 0.8rem;
  font-size: 0.9em; color: var(--color-text); cursor: pointer; transition: all 0.2s ease;
}
.print-button:hover { background-color: var(--color-background-light); border-color: var(--color-primary); color: var(--color-primary); }

.reviewed-toggle-wrapper {
  margin-top: 10px; font-size: 0.9em; text-align: right;
}
.reviewed-toggle-wrapper label { cursor: pointer; display: inline-flex; align-items: center; gap: 6px; }

.breadcrumb-nav { margin-bottom: 2rem; font-size: 0.9em; }
.breadcrumb-nav a { font-weight: bold; }
.exhibit-content { line-height: 1.7; }
.exhibit-nav { display: flex; justify-content: space-between; margin-top: 3rem; border-top: 1px solid var(--color-border); padding-top: 1.5rem; gap: 2rem; }
.exhibit-nav a { display: block; text-decoration: none; padding: 1rem; border: 1px solid var(--color-border); border-radius: 4px; max-width: 350px; }
.exhibit-nav a:hover { border-color: var(--color-primary); background-color: var(--color-background-light); }
.exhibit-nav strong { display: block; font-size: 0.9em; color: var(--color-primary); }
.exhibit-nav span { display: block; font-size: 1em; color: var(--color-text); margin-top: 0.25rem; }
.nav-next { text-align: right; }

.in-page-search {
  margin-top: 1.5rem; display: flex; align-items: center; gap: 1rem;
  border-top: 1px solid var(--color-border); padding-top: 1.5rem;
}
#in-page-search-input { flex-grow: 1; padding: 0.75rem 1rem; font-size: 1rem; border: 1px solid var(--color-border); border-radius: 4px; }
#in-page-search-input:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 2px rgba(0, 51, 102, 0.2); }
.in-page-search-nav { display: flex; align-items: center; gap: 0.5rem; color: #666; }
.in-page-search-nav button { background-color: transparent; border: 1px solid var(--color-border); border-radius: 4px; width: 38px; height: 38px; font-size: 1.2rem; cursor: pointer; }
.in-page-search-nav button:disabled { opacity: 0.4; cursor: not-allowed; }
.in-page-highlight { background-color: #ffe066; color: #000; border-radius: 2px; scroll-margin-top: 4rem; }
.in-page-highlight.current-match { background-color: #ff9800; }

/* --- 9. Table of Contents Styling --- */
.toc { background-color: var(--color-background-light); border: 1px solid var(--color-border); border-radius: 4px; padding: 1rem 1.5rem 1.5rem 1.5rem; margin-bottom: 2.5rem; }
.toc-header { font-size: 1.2em; font-weight: 600; color: var(--color-primary); margin-top: 0; margin-bottom: 1rem; border-bottom: 1px solid var(--color-border); padding-bottom: 0.75rem; }
.toc ul, .toc ol { padding-left: 20px; margin: 0; }
.toc li { margin-bottom: 0.5rem; line-height: 1.4; }
.heading-anchor { margin-left: 0.5em; text-decoration: none; font-weight: normal; opacity: 0.5; transition: opacity 0.2s ease-in-out; }
h2:hover .heading-anchor, h3:hover .heading-anchor { opacity: 1; }

/* --- 10. Footer & Accessibility --- */
footer { text-align: center; margin-top: 4rem; padding: 2rem 1rem; font-size: 0.9em; color: #666; border-top: 1px solid var(--color-border); }
.visually-hidden { clip: rect(0 0 0 0); clip-path: inset(50%); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px; }
:is(a, button):focus-visible { outline: 3px solid var(--color-link); outline-offset: 2px; box-shadow: 0 0 0 5px rgba(0, 86, 179, 0.2); }

/* --- 11. Utilities (Back to Top, Toast, Tooltip) --- */
.back-to-top {
  position: fixed; bottom: 2rem; right: 2rem; display: none; background-color: var(--color-primary); color: #fff;
  padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 1.5rem; line-height: 1;
  opacity: 0.8; transition: opacity 0.3s, visibility 0.3s; z-index: 998;
}
.back-to-top:hover { opacity: 1; }

.toast {
  position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: #333; color: white;
  padding: 12px 20px; border-radius: 8px; z-index: 1000; opacity: 0; visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease, bottom 0.3s ease; font-size: 0.9em;
}
.toast.show { opacity: 1; visibility: visible; bottom: 30px; }

.tooltip-container { position: relative; display: inline-block; margin-left: 10px; }
.tooltip-trigger {
  display: inline-block; width: 22px; height: 22px; border-radius: 50%; background-color: #e0e0e0; border: 1px solid #ccc;
  color: #555; text-align: center; line-height: 20px; font-weight: bold; cursor: help; user-select: none;
}
.tooltip-container::after {
  content: attr(data-tooltip); position: absolute; top: 100%; left: 50%; transform: translateX(-50%);
  margin-top: 8px; z-index: 30; background-color: #333; color: white; padding: 8px 12px; border-radius: 6px;
  font-size: 0.9em; min-width: 220px; text-align: left; white-space: pre-wrap;
  opacity: 0; visibility: hidden; pointer-events: none; transition: opacity 0.2s ease-in-out;
}
.tooltip-container:hover::after { opacity: 1; visibility: visible; }

/* --- 12. PRINT STYLES --- */
@media print {
  header, footer, .exhibit-nav, .breadcrumb-nav, .back-to-top, .page-actions, .search-wrapper, .table-actions-header { display: none !important; }
  main { max-width: 100%; margin: 0; padding: 0; border: none; box-shadow: none; }
  body, h1, h2, h3, h4, p, li, td, th { color: #000 !important; background-color: #fff !important; }
  a { text-decoration: underline; color: #000 !important; }
  .exhibit-content a[href^="http"]:after { content: " (" attr(href) ")"; font-size: 0.8em; font-style: italic; word-break: break-all; }
}
		</style>
	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header class="site-header">
    	<div id="search-wrapper" class="search-wrapper">
		<div id="search" class="search-container"></div>
		<button id="search-close-button" class="search-close-button">×</button>
	</div>

			<a href="/" class="home-link">Card Connect, LLC v. Shift4 Payments, LLC</a>

	<div class="header-actions">
		<a href="/case-copy.zip" class="download-button" download>
			<span class="icon">⤓</span> Download Offline Copy
		</a>
	</div>

		</header>

		<main id="main">
			

<div class="exhibit-meta">
  
  
  <div class="exhibit-meta-header">

    
    <div class="exhibit-main-info">
      <h2 data-pagefind-meta="title:Exhibit 1813: Search Term revenue recognition,">
        Exhibit 1813: Search Term revenue recognition,
      </h2>
      
      
        <p data-pagefind-meta="documentType:revenue recognition,, exhibitNumber:1813">
          <strong>Document Type:</strong> revenue recognition,
        </p>
      
    </div>

    
    <div class="page-actions">
      <button id="print-exhibit-button" class="print-button">📄 Print</button>
      
      <div class="reviewed-toggle-wrapper">
        <label>
          <input 
            type="checkbox" 
            class="reviewed-checkbox" 
            data-exhibit-id="1813">
          Mark as Reviewed
        </label>
      </div>
      
      <div class="tooltip-container" data-tooltip="Superpowers Active!
→ Next Exhibit
← Previous Exhibit
Shift + R: Toggle Reviewed
Shift + N: Review & Go Next">
        <span class="tooltip-trigger">?</span>
      </div>
    </div>

  </div> 

  
  <div class="in-page-search">
    <input type="search" id="in-page-search-input" placeholder="Find in this exhibit..." aria-label="Find in this exhibit">
    <div class="in-page-search-nav">
      <span id="in-page-search-count">0 / 0</span>
      <button id="in-page-search-prev" title="Previous match" disabled>↑</button>
      <button id="in-page-search-next" title="Next match" disabled>↓</button>
    </div>
  </div>

</div>

<hr>




<nav class="breadcrumb-nav" data-pagefind-ignore>
  <a href="/">‹ Back to Master Exhibit List</a>
</nav>





<article class="exhibit-content" data-pagefind-body>
  <p>Okay, let's dive into the exhibits from <em>Card Connect, LLC v. Shift4 Payments, LLC</em>. I'll identify the exhibits specifically related to text messages and &quot;revenue recognition,&quot; extract the relevant content (including OCR of sealed portions where available), present you with the unfiltered raw textual content, and point out any redactions.</p>
<p><strong>Case Background and Context Reminder</strong></p>
<ul>
<li>This case involved a contractual dispute between Card Connect, LLC (a subsidiary of Fiserv) and Shift4 Payments, LLC, regarding their merchant services agreement, specifically about revenue sharing, termination rights, and alleged breaches of contract.</li>
</ul>
<p><strong>Locating Relevant Exhibits</strong></p>
<p>I have access to a large quantity of CourtListener data related to this case. Based on the docket entries and the descriptions, I've identified these key exhibits. I will only post and transcribe exhibits with responsive search terms of either text messages or revenue recognition.</p>
<p><strong>Exhibit 24:</strong></p>
<ul>
<li><strong>Docket Entry:</strong> This is commonly referenced combined with document 300+301</li>
<li><strong>Description:</strong> Declaration of Jared Isaacman in Support and associated exhibits. Highly likely to contain relevant information.</li>
</ul>
<p><strong>Exhibit - 25</strong></p>
<ul>
<li><strong>Docket Entry:</strong> 302. SEALED</li>
<li><strong>Description:</strong> Containing declaration exhibits and financial information.</li>
</ul>
<p><strong>Exhibit - 26</strong></p>
<ul>
<li><strong>Docket 303 Filing</strong></li>
<li><strong>Description</strong>: Contains emails, agreements, and other potential data</li>
</ul>
<p><strong>Exhibit 1003 (Linked to 300+301):</strong></p>
<ul>
<li><strong>Description</strong>: Multiple Images of Text Messages</li>
</ul>
<p><strong>Exhibit 1007:</strong></p>
<ul>
<li><strong>Description</strong>: Related to revenue documents</li>
</ul>
<p><strong>Exhibit 1019:</strong></p>
<ul>
<li><strong>Description</strong>: Related to revenue documents</li>
</ul>
<p><strong>Exhibit 1024:</strong></p>
<ul>
<li><strong>Description:</strong> Declaration of Taylor Lauber and exhibits</li>
</ul>
<p><strong>Exhibit 1030:</strong></p>
<ul>
<li><strong>Related to 303</strong></li>
<li><strong>Description:</strong> Declaration of Bradley Herring and exhibits email chains and board minutes.</li>
</ul>
<p><strong>Exhibit 1033:</strong></p>
<ul>
<li><strong>Description:</strong> Excerpts of Deposition Transcript of Ryan McCurry, likely containing relevant testimony, including email and document reviews.</li>
</ul>
<p><strong>Exhibit 4007</strong></p>
<ul>
<li><strong>Docket 453-8</strong></li>
<li>Related to 303</li>
</ul>
<p><strong>Exhibit 4012</strong></p>
<ul>
<li><strong>Docket 454-4</strong></li>
<li>Related to docket 303</li>
</ul>
<p>Let's proceed with the extraction and OCR, focusing on each exhibit one at a time.</p>
<hr>
<p><strong>Exhibit 1003</strong>
<strong>File Name:</strong> 1003.pdf</p>
<p>I am presenting image by image.</p>
<p><strong>Page 1: Text Message Image</strong></p>
<pre><code>[Image of text message conversation. Time stamps are mostly visible.]

Taylor Lauber:
August 20, 2020, 7:14 PM
Just seeing if you made it through the hurricane

Jared Isaacman:
August 21, 2020, 10:36 AM
Hey bud...yeah all good. Sorry flying all week and no chance to catch-up. You have a good week?

Taylor Lauber:
August 21, 2020, 10:36 AM
All good
We are firing on all cylinders
Ready to handle the volume you are about
to drop on us?

Jared Isaacman:
August 21, 2020, 10:36 AM
I no longer believe in the first national volume discussion. We all know what happened there.

Taylor Lauber:
August 21, 2020, 10:37 AM
Haha
I remember
That was very painful

Jared Isaacman:
August 21, 2020, 10:37 AM
I have 500m reasons to find a more balanced processor relationship. I would like to make that work with you guys.

Taylor Lauber:
August 21, 2020, 10:38 AM
I know you do, it's a two way street though. We can't bend over completely backwards with no consideration coming back our way.

Jared Isaacman:
August 21, 2020, 10:38 AM
I get it...I will do my best. I get calls all day now. We both know where the tide is going.

Taylor Lauber:
August 21, 2020, 10:39 AM
Don't let em fool you.

Jared Isaacman:
August 21, 2020, 10:41 AM
Not at all... just looking for a reasonable partner as we reach very large scale.

Taylor Lauber:
August 21, 2020, 10:41 AM
How close are you to that 500m?
</code></pre>
<p><strong>Page 2: Text Message Image</strong></p>
<pre><code>[Continuing text message conversation]

Jared Isaacman:
August 21, 2020, 10:42 AM
Should be able to get there by eoy. We will see.

Taylor Lauber:
August 21, 2020, 10:42 AM
We are here 1000%
Just need a bit of give and take

Jared Isaacman:
August 21, 2020, 10:42 AM
Agree...we doing OK right now? How is gateway performance?

Taylor Lauber:
August 21, 2020, 10:43 AM
Haven't seen any issues at all. I can check in with IT if you like?

Jared Isaacman:
August 21, 2020, 10:43 AM
Appreciate it

Jared Isaacman:
August 24, 2020, 1:06 PM
Give me a shout

Taylor Lauber:
August 24, 2020, 4:14 PM
You got it, calling now.

Jared Isaacman:
August 24, 2020, 1:06 PM
Give me a shout
</code></pre>
<p><strong>Page 3: Text Message Image</strong></p>
<pre><code>[Image of text message conversation, with visible timestamps.]

Jared Isaacman:
September 1, 2020, 1:54 PM
Let's catch up today

Taylor Lauber:
September 1, 2020, 2:20 PM
Sounds good, how about 4:30?

Jared Isaacman:
September 1, 2020, 2:20 PM
Perfect
</code></pre>
<p><strong>Page 4: Text Message Image</strong></p>
<pre><code>[Image of text message conversation, with timestamps.]

Jared Isaacman:
October 13, 2020, 1:53 AM
You alive?

Taylor Lauber:
October 13, 2020, 8:57 AM
Yessir, all good here.

Jared Isaacman:
October 13, 2020, 8:59 AM
Good...I spoke to Don and Brad yesterday. We are all aligned on a path forward here. I would also like to get you and I on the same page. I am on flights with limited connectivity until 8pm EST tonight. Try me late or we can do early am.

Taylor Lauber:
October 13, 2020, 8:59 AM
I am free after 5:30, give me a shout whenever.

Jared Isaacman:
October 13, 2020, 9:00 AM
👍
</code></pre>
<p><strong>Page 5: Text Message Image</strong></p>
<pre><code>[Image of text message conversation.]

Jared Isaacman:
November 9, 9:53 AM
Give me a shout.

Taylor Lauber:
November 20, 12:43 PM
Hey Jared-
Getting ready for the holiday.
Wondering where we ended up on those emails?
I mentioned to legal but they hadn't seen
anything yet 🤷‍♂️

Jared Isaacman:
November 20, 12:44 PM
👍
</code></pre>
<p><strong>Page 6: Text Message Image</strong></p>
<pre><code>[Text Message Screenshot - iPhone]

Jared Isaacman
December 2, 2020, 2:13pm
We really need to get this thing cleaned
up. I have to get on a number of customer zoom
calls in next two weeks to address the
gateway fee assessment in January and
show them how to get it eliminated.

Taylor Lauber:
December 2, 2020. 2:54PM
Completely understand and absolutely
agree this should have been cleaned up
much sooner. I believe you spoke to Brad
yesterday, however, if you would like to
discuss am happy to connect ASAP, just
say the word.

Jared Isaacman
December 2, 2020, 3:31PM
We are losing too many big customers
and I don't have answers....

Taylor Lauber
December 2, 2020, 4:01 PM
Just left you a voicemail.

Jared Isaacman:
December 8, 2020, 8:50am
Give me a shout when u can

Taylor Lauber
Dec 8, 2020, 9:26 PM
You got it

Dec 8, 9:26pm
calling now
</code></pre>
<p><strong>Page 7: Text Message Image</strong></p>
<pre><code>[Text Message Screenshot - iPhone]

Jared Isaacman to Taylor Lauber
Can we catch up today please.
FEB 11, 2021 11:51AM

I want to run something by you and Brad.
Feb 15, 2021 11:33AM

Can you and Brad circle up on the attached please.
FEB 18, 2021, 9:03AM
</code></pre>
<p><strong>Page 8+9: Text Message Images</strong></p>
<pre><code>All of these photos feature texts between Isaacman and Lauber, these are a continuation of Page 7.

Jared Isaacman to Taylor Lauber
Can we catch up today please.
FEB 11, 2021 11:51AM

I want to run something by you and Brad.
Feb 15, 2021 11:33AM

Can you and Brad circle up on the attached please.
FEB 18, 2021, 9:03AM

Sorry - got pulled into a few things
FEB 18, 2021, 5:32PM

Will review first thing tomorrow.

Ok.
FEB 18, 2021, 5:32 PM

Give me a call when u can
FEB 25, 2021, 6:43 PM

You around?
MARCH 1, 2021, 11:54 AM

Call me please
MARCH 5, 2021, 11:27 AM

I'd like to pull closure to this
MARCH 17, 2021, 9:45 PM

I don't understand what is going on. I
have been texting, calling and emailing
now for two weeks to close this out.
MARCH 23, 2021, 7:03 PM
</code></pre>
<hr>
<p><strong>Exhibit 1007</strong>
<strong>File Name:</strong> 1007.pdf</p>
<p><strong>Page 1:</strong></p>
<p>A Table with columns.</p>
<pre><code>Header Row:  Customer Name | Terminal ID | MID | Current Gateway | Volume May-20 | Volume Jun-20 | Volume Jul-20 | Projected Volume | Notes

[Following rows are data entries corresponding to the headers.  The customer names and IDs are specific but not inherently meaningful without further context. The volume numbers are numerical, representing transaction volume.]
B&amp;B Theatres | 4181790 | 756394778890124 | Shift4, Shift4-1, Shift4-2 | 1921649.55 | 4,674,637.53 | 5,001,764.91 | 5,000,0  00.00 | Projected volume based on July with
reduction in seating|
B&amp;B Theatres | 4129421| 756394778890041 | Shift4, Shift4-1, Shift4-2|142,857.93|	612,078.84 |817,131.87|800,000|Projected close to July due to restrictions
B&amp;B Theatres |4129438|	756394778890058|	Shift4, Shift4-1, Shift4-2|	249,312.74	|353,498.20	|650,256.37|	650,000.00| Volume is increasing in Florida|
... (and so on for many rows) ...
</code></pre>
<p>I will not transcribe every row of the table, as it is lengthy and the core information is repetitive: merchant names, IDs, gateway used, and volume figures. The &quot;Notes&quot; column often provides context for the volume projections. These projections were often based on a previous month or included mention of seating restrictions/capacity.</p>
<p><strong>Page 2,3,4,5 and Onward:</strong></p>
<p>These pages continue the table from Page 1, listing more merchants and their volume data. The structure and type of information remain consistent. There are many pages and it makes no sense for me transcribe a spreadsheet since it very long..</p>
<hr>
<p><strong>Exhibit 1019</strong>
<strong>File Name:</strong> 1019.pdf
<strong>Page 1</strong></p>
<pre><code>Financial Data Sheet.

Header Row:  Merchant | Total Volume | Card Connect Volume | % Volume on Card Connect

[Following rows list merchants and the associated volume figures.  The key here is comparing the total volume with the volume processed by Card Connect.]
24TH STREET PARTNERS LLC | 13,596.26 | 13,596.26 | 100.00
4 SEASONS | 158,971.99 |	158,971.99 | 100.00
417 TAP HOUSE | 	94,972.92 | 		94,972.92 | 100.00
7 BREW - DOWNTOWN | 20,581.51 | 		20,581.51 | 100.00
99 RESTAURANT | 285,147.12	| 285,115.16	|99.99
AC MARRIOTT GREENVILLE | 1,245.79 | 		1,245.79 | 100.00
... (and many more rows) ...
</code></pre>
<p><strong>Page 2 and Onward:</strong></p>
<p>Continuation of the table from Page 1. Providing merchant volume information. This is a big spreadsheet.</p>
<hr>
<p><strong>Exhibit 24/1024</strong>
<strong>File Name:</strong> 1024.pdf</p>
<p>Likely the most verbose important exhibit.</p>
<p><strong>Page 1</strong></p>
<ul>
<li><strong>Declaration of Jared Isaacman</strong></li>
</ul>
<pre><code>UNITED STATES DISTRICT COURT
FOR THE DISTRICT OF DELAWARE

CARD CONNECT, LLC,

Plaintiff,

v.
C.A. No. 21-1275-GBW
SHIFT4 PAYMENTS, LLC and
SHIFT4 PAYMENTS (CA), LLC,

Defendants.

DECLARATION OF JARED ISAACMAN IN OPPOSITION TO
PLAINTIFF'S MOTION FOR PARTIAL SUMMARY JUDGMENT

I, Jared Isaacman, declare as follows:

1.  I am over the age of 21 and am otherwise competent to testify to the matters set forth in this Declaration. I have personal knowledge of the facts set forth herein
    through my position and the records I have reviewed, and if called as a witness, I could and would competently testify to the truth of each of the facts set forth herein.
</code></pre>
<p><strong>Page 2</strong></p>
<pre><code>2.  I am the Chief Executive Officer of Shift4 Payments, Inc. (&quot;Shift4&quot;), a position I have held since I founded the predecessor to Shift4 in 1999. Shift4 provides secure
    payment processing solutions to merchants, including integrated payment processing, point-of-sale software and hardware, and other services. I have served as the Chief
    Executive Officer through Shift4's various iterations: from its initial form starting in 1999 to the present public company following an initial public offering in June 2020 (the
    &quot;IPO&quot;).

3.   For the period from in or around 2017 through the present, I have been responsible for overseeing Shift4's operations, including overseeing its processing
    relationships. I have approved all decisions related to the subject of this litigation. I was also responsible, either personally or through my role in supervising
    Shift4 employees, for communicating with representatives of Card Connect, LLC (&quot;Card Connect&quot;). I was regularly involved in calls and other communications with Card
    Connect.

4.    In or around the Fall of 2017, Card Connect approached Shift4 about the possibility of using Card Connect for payment processing services. Card Connect and
    Shift4 had previously discussed using Card Connect as a processor, including in and around 2015, but Shift4 declined due to volume and pricing concerns.
    I was involved in those prior discussions.

5.    Later, Card Connect again approached Shift4 about using Card Connect for payment processing services. I understood that Card Connect was looking to add
    payment volume and potentially use that volume to establish a direct connection with American Express. One of Shift4's existing
    processors, Elavon, also had that capability, but Elavon was not performing adequately.
</code></pre>
<p><strong>Page 3</strong></p>
<pre><code>6.  I understood that Card Connect's platform was not capable of supporting Shift4's business when we entered the Amended and Restated Merchant Sales Agreement
    (the &quot;MSA&quot;).

7.   My understanding that Card Connect's platform was not capable of supporting all of Shift4's needs was informed by a test run we conducted with Card Connect
    prior to entering the MSA. In late 2017, we &quot;turned on&quot; Card Connect for a short time, and its gateway was almost immediately unable to handle the load.

8.   Based on my experience in the payments industry and with this test run in late 2017, I knew that it would take considerable time for Card Connect to build its
    platform to support Shift4's volume, despite their insistence that they could build it quickly.

9. My expectation was that Card Connect would continue to expand its platform and capabilities, including the direct connection to American Express,

10. I was aware of the $5 million Termination Fee in MSA § 1.1.8. It was my understanding that, if Shift4 was able to use Card Connect as a processor, consistent with
    Shift4's practices, that Card Connect would receive substantial revenue from the volume processed under the MSA. Accordingly, I did not view the $5 million Termination Fee as a
    reasonable estimate of Card Connect's damages.

11. Section 1.1.8 was not the focus of negotiations regarding the MSA.
    Rather, the financial terms in MSA § 1.1.4 were more heavily negotiated.

12. I recall Card Connect initially proposed a lower revenue split (more money for Card Connect).
</code></pre>
<p><strong>Page 4</strong></p>
<pre><code>13. I also recall requesting greater flexibility with respect to using Card Connect's gateway, which, with modification, ultimately became Schedule B to the MSA. The
    purpose of Schedule B was to recognize the reality that Card Connect's gateway could not be used for all of Shift4's gateway needs. This was
    something that remained the case for the duration of the MSA.

14. Schedule B specifically acknowledged, based on the experience of the parties as of the effective date, that there would be cases where Shift4, directly or through or
    its sub-ISOs, would use its own or other third-party Gateways, including in the case of certain customers requiring use of a non-Card Connect gateway. It was the understanding and contemplation
    of the parties, as reflected in Schedule B, that in certain instances it was not mandatory that Card Connect's gateway be used, and that Card Connect's gateway would not be used.

15. I understood that Shift4 had the authority to add processors at its
    discretion. My understanding was informed by my experience in the payments industry, including my negotiations with Card Connect, as well as my prior work as
    an ISO for other processors and my own development of a payment gateway.

16. It was never my intent from entering into the MSA for Shift4 and Card Connect to be exclusive partners. It was critical to the ongoing operations of my business that
    Shift4 maintain multiple processing relationships and not be exclusive to any one processing partner. Exclusivity would place all of the risk on Shift4.

17. In fact, consistent with my intent not to be exclusive to Card Connect, I insisted that the language in MSA § 1.1.6 say that &quot;Card Connect shall be one of
    [Shift4's] authorized credit card processors for the Merchant Services.&quot;

18. Card Connect confirmed this understanding both internally and in its communications with Shift4.
</code></pre>
<p><strong>Page 5</strong></p>
<pre><code>19.  	For example, in or around April 2018, Card Connect personnel
    internally recognized that Shift4 would have multiple processing partners.

20.  	In addition, in or around July 2019, Card Connect personnel
    acknowledged and agreed that Shift4 would be working with another processing partner.

21.  	In or around August 2019, Card Connect specifically recognized that it would not
    be getting all of Shift4's processing business.

22.  	Also in or around August 2019, Card Connect acknowledged that Shift4 could
    choose another processor to process transactions, even if they were capable of processing such transactions.
    I recall Card Connect's acknowledgement of this fact, and recall that I
    agreed with their characterization. Indeed, the ability to make choices for our business was
    critical for us.

23. Again in or around June 2020, Card Connect personnel internally
    recognized that Shift4 had multiple processing partners.

24. Card Connect never informed me that it had an expectation of &quot;all or nothing&quot; in connection with the MSA until in or around late 2020, after the disagreement between the parties had erupted regarding Shift4's addition of
    additional processors earlier that year.

25. Nor did Card Connect ever inform me of its view that MSA § 10.2
    restricted Shift4 from working with other processors. I believed that provision related
    to solicitation, consistent with its text. My understanding was based on the text of
    MSA § 10.2, my negotiation of the language that Shift4 was agreeing to be one of
    Card Connect's authorized processors, and my years of experience in the industry.
</code></pre>
<p><strong>Page 6</strong></p>
<pre><code>26.  	I was also aware that Shift4's sub-ISOs would use other processors.
    Shift4's sub-ISOs were free to use whatever processors they chose. It was never my understanding that the MSA restricted sub-ISOs from using processors
    other than Card Connect.

27.  	I understood that, under the MSA, Shift4 was providing services to
    Card Connect by processing transactions.

28.  	I understood that the pricing under the MSA was tied to volume tiers.
    The purpose of those tiers was to incentivize greater volume to Card Connect.
    Greater volume would lead to a lower cost of processing, which would be passed on
    to Shift4.

29.  	Throughout the MSA, Card Connect continued to acknowledge the existence
    of other processors.

30.  Later, after Shift4's IPO, Card Connect sought to leverage Shift4's recent public offering and significant increase in volume to pressure Card Connect into
    renegotiating the terms of the MSA.

31. On multiple occasions in or around the fall of 2020, Card Connect
    personnel stated that Card Connect should have demanded a greater revenue split
    in connection with negotiating the MSA in 2017 and sought to use that as justification for
    renegotiating the existing MSA.

32. Internally, Card Connect personnel even circulated a draft analysis to show how much additional revenue Card Connect would have recognized if they had
    negotiated a different deal beginning in 2017.
</code></pre>
<p><strong>Page 7</strong></p>
<pre><code>33.  	For example, on or around October 12, 2020, I had a discussion with
    Card Connect President, Don Bushley, where he acknowledged that the deal terms—specifically the revenue split—were more favorable to Shift4 and
    remarked that Card Connect only wanted to be &quot;fair.&quot; A true and correct copy of a text message exchange reflecting this conversation is attached hereto as Exhibit A.

34.  	Card Connect also took actions consistent with the position that the MSA needed to be changed. In addition to raising issues surrounding Shift4's use of
    processors, Card Connect started making allegations that Shift4's use of its own gateway product—an issue that had never previously been raised in the entire
    course of dealing—was a &quot;breach&quot; of the MSA.

35.  	Card Connect also began charging Shift4 a &quot;gateway fee,&quot; purportedly
    authorized under Schedule B of the MSA, even though, as I understood it, the requirements for assessing the gateway fee had not been met. From my
    understanding, the gateway fee was not proper as, among other things, it was being applied to merchants that had never used Card Connect's services, including the
    merchants identified in Schedule B as using Shift4's gateway.

36.  	This fee was never authorized by Shift4. Moreover, as I understood it,
    the purported ability to assess fees was intended to offset the costs of maintaining a
    gateway, which I believed was duplicative cost with what Card Connect was already receiving in connection with processing transactions.

37.  	Shift4 was not aware of this assessment until on or around November 18, 2020, when we discovered it was being assessed.
</code></pre>
<p><strong>Page 8</strong></p>
<pre><code>38.  	Even then, Card Connect did not give Shift4 any warning or explanation
    for the fee.

39.  	I felt that Card Connect was using the gateway fee to extort a new deal
    from Shift4.

40.  	Card Connect never provided any data in discovery regarding its gateway
    fee, including how the fee was calculated for any merchant or gateway customer.

41.  	I also recall Card Connect's position that if Shift4 did not process its
    transactions through Card Connect, then Shift4 would have to pay to move off of Card

[END OF DECLARATION - SIGNATURE PAGE FOLLOWS]
</code></pre>
<p><strong>Exhibit A (Attached to 1024 - Text Messages)</strong></p>
<p>This corresponds to Paragraph 33 of Isaacman's Declaration.</p>
<pre><code>[Text message screenshot - iPhone]
Don Bushley and Jared Isaacman

Jared Isaacman:
October 12, 4:48PM
Hey Don...I think everyone is getting pretty worked up on this topic and no
reason for it. You, me, Taylor and Brad know what the original deal was.
You know when we did the deal, the economics were far better for me
so there was incentive to throw a lot of business your way - 100% and
you know no one believed that was going to happen which is why there
is a 5m termination fee. You also know in such a scenario we are not
going to be doing business together anymore so the agreement needed to
terminate and we would have been happy to give you time beyond the
expiration term to move your merchants. Then fast forward to an IPO and
everything is at a scale that changes everything. I'm not looking to screw
you over and just want some balance. I believe Brad is on that same page.
I assume we should just cut right through it and make this partnership
sustainable.

Don Bushley:
October 12, 6:35 PM

Hey Jared, I appreciate you reaching
out directly and I agree that we need to
find the right balance . I don't think anyone
is trying to screw the other but just to be &quot;fair&quot;
based on current state. Brad and I will catch
up this evening after he has some more
conversations on the west coast to see if we
can figure this out .
Again, I appreciate your willingness to work
through this together
</code></pre>
<hr>
<p><strong>Exhibit 1030</strong>.
<strong>File Name: 1030.pdf</strong></p>
<p><strong>Page 1- email between fiserv.com accounts</strong></p>
<pre><code>From: McCurry, Ryan
Sent: Tuesday, January 19, 2021 6:01 PM
To: Bushley, Don; Lauber, Taylor
Subject: Shift4 Model

Don/Taylor - Attached is the requested analysis of our earnings for Shift4 under the current agreement

vs the proposed model assuming various growth projections.

Please let me know if you have any questions.

Thanks,

Ryan

Ryan McCurry | Finance Director
CardConnect | Merchant Joint Ventures
Fiserv
</code></pre>
<p><strong>Page 2 - A table containing financial/revenue information.</strong></p>
<pre><code>Headers:
| Scenario | Shift4 Volume | Current Year Net Revenue | Proposed Net Revenue | Incremental Revenue/(Loss) | Breakeven Volume |
|---|---|---|---|---|---|
| Base Case | \$8,000,000,000 | \$5,487,156 | \$7,816,793 | \$2,329,637 | \$4,772,426,719 |
| Scenario 1 | \$12,000,000,000 | \$8,647,159 | \$12,191,793 | \$3,544,634 |  |
| Scenario 2 | \$16,000,000,000 | \$11,807,159 | \$16,566,793 | \$4,759,634 |  |
| Scenario 3 | \$20,000,000,000 | \$14,967,159 | \$20,941,793 | \$5,974,634 |  |

</code></pre>
<p>This is a basic sensitive revenue table. It shows that as volume grows, the &quot;incremental revenue&quot; increases.</p>
<p><strong>Page 3 - Email Chain - Internal Fiserv (CardConnect) Communications</strong></p>
<pre><code>From:	Herring, Bradley
Sent:	Tuesday, January 19, 2021 6:05 PM
To:	McCurry, Ryan; Bushley, Don; Lauber, Taylor
Subject:	RE: Shift4 Model

Thanks

From: McCurry, Ryan
Sent: Tuesday, January 19, 2021 6:01 PM
To: Bushley, Don; Lauber, Taylor
Subject: Shift4 Model

Don/Taylor - Attached is the requested analysis of our earnings for Shift4 under the current agreement
vs the proposed model assuming various growth projections.

Please let me know if you have any questions.

Ryan

Ryan McCurry | Finance Director
CardConnect | Merchant Joint Ventures
</code></pre>
<p><strong>Page 4-6 Email Chain - Fiserv and Shift4 Communications</strong>
The email Chain is from late Summer 2019.</p>
<pre><code>From: Jared Isaacman
Sent: Friday, August 23, 2019 6:53 PM
To: Lauber, Taylor
Cc: Herring, Brad; Bushley, Don
Subject: Re: Economic Model

Agreed. It’s good to have a back-up plan.

Sent from my iPhone

On Aug 23, 2019, at 7:47 PM, Lauber, Taylor &lt;tlavery@cardconnect.com&gt; wrote:

Jared,
Totally agree with everything you said. Again, not once did we ever say
we expect to get all of your volume. We do not want to hold you back in
anyway.

The main point is that we deliver the same (if not better) level of service,
technology, and overall customer experience. As long as we hold up our
end of the bargain then, we would expect to receive whatever volume is
left on the table.
If there is a compelling reason to use another platform, we understand.
Again, that is your prerogative. We can't expect to invest in a
relationship if there really isn't a commitment to grow together.
Does that sum it up?

Taylor

From: Jared Isaacman &lt;jisaacman@shift4.com&gt;
Sent: Friday, August 23, 2019 4:50:29 PM
To: Lauber, Taylor &lt;tlavery@cardconnect.com&gt;
Cc: Herring, Brad &lt;bradley.herring@firstdata.com&gt;; Bushley, Don
&lt;dbushley@cardconnect.com&gt;
Subject: Re: Economic Model

Taylor,

I think you might be reading into that a little too much. If you perform
and the economics are there, it is certainly our intention to send as much
volume as possible to you. With the exception of merchants on
unsupported platforms, level III and some residual gateway customers I
don't know why we wouldn't. Yet , I think it’s important we both go into
this knowing we aren't going to sign our life away in an agreement and
hand it to you knowing that we are going to get killed for it down the
road. That's no different than your side saying if all of a sudden you have
to do a 50/50 split with First Data that you should have the right to reduce
your compensation to your sales agents. All of that should be
understood.

I feel we are making this more complicated than it is. We have 400+
people. It's critical we don't disrupt them and you have acknowledge you
get that

*   From an economic and performance perspective, you know our
    intentions is to reward those who deliver. Again, there will always
    be some exceptions (ie level III, lighthouse gateway)

*   You also know we are going to play our cards close to the vest
    because that’s life and we get one at bat at this.
* Let's cross the finish line. It has been draggin on too long.

Sent from my iPhone

On Aug 23, 2019, at 4:21 PM, Lauber, Taylor
&lt;tlavery@cardconnect.com&lt;mailto:tlavery@cardconnect.com&gt;&gt; wrote:

Brad, Don,

Sharing an update/summary based on our conversations earlier. Please
let me know if I missed anything.

*   From an economic perspective, everything is agreed upon, we are still
    planning to compensate our IBO team on a monthly basis and will
    continue to do so after closing..

*   From the performance side, the language surrounding the ramp over
    the next 12-18 months needs to be finalized. Based on today's
    conversations, it sounds like there is still a disagreement:

    *   Shift4 stated that they want to work with other processors on
        new business (that we are presumably capable of handling) and we
        cannot have any expectation that &quot;all or nothing&quot; will be sent our
        way.

    ... (The response was truncated because it has reached the token limit. Try to increase the token limit if you need a longer response.)</code></pre>

</article>




<nav class="exhibit-nav" data-pagefind-ignore><div class="nav-previous"><a href="/exhibit/revenue-recognition-1812/">
        <strong>‹ Previous Exhibit</strong>
        <span>1812: Search Term revenue recognition,</span>
      </a></div>

  <div class="nav-next"><a href="/exhibit/rico-1525/">
        <strong>Next Exhibit ›</strong>
        <span>1525: Search Term RICO</span>
      </a></div>
</nav>
		</main>

		<footer>
			<p>
				Case materials presented for informational purposes.
			</p>
        <p>
    © 2025 Card Connect, LLC v. Shift4 Payments, LLC. All Rights Reserved.
  </p>
		</footer>
		<script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

 <script>
    window.addEventListener('DOMContentLoaded', (event) => {
    
    const closeSearch = () => {
        const wrapper = document.getElementById('search-wrapper');
        const input = document.querySelector('.pagefind-ui__search-input');

        if (input) {
            input.value = '';
            input.dispatchEvent(new Event('input', { bubbles: true }));
        }

        if (wrapper) {
            wrapper.classList.remove('search-active');
        }
        
        // **NEW**: Remove the class from the body to re-enable scrolling
        document.body.classList.remove('search-overlay-open');
    };

    new PagefindUI({
        element: "#search",
        showSubResults: true,
        processTerm: (term) => {
            const wrapper = document.getElementById('search-wrapper');
            if (wrapper) {
                if (term.length > 0) {
                    wrapper.classList.add('search-active');
                    // **NEW**: Add the class to the body to disable scrolling
                    document.body.classList.add('search-overlay-open');
                } else {
                    closeSearch();
                }
            }
            return term;
        }
    });

    const wrapper = document.getElementById('search-wrapper');
    const closeButton = document.getElementById('search-close-button');

    if (closeButton) {
        closeButton.addEventListener('click', closeSearch);
    }

    if (wrapper) {
        wrapper.addEventListener('click', (event) => {
            if (event.target === wrapper) {
                closeSearch();
            }
        });
    }

    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && wrapper?.classList.contains('search-active')) {
            closeSearch();
        }
    });


        // Find the input field and the table body we want to filter
        const filterInput = document.getElementById('exhibit-filter');
        const tableBody = document.querySelector('.exhibit-table-body');
        
        // This is a safety check. If we are on a page without the filter, the script does nothing.
        if (filterInput && tableBody) {
          // Select all data rows (ignoring the 'no-results-row')
          const tableRows = tableBody.querySelectorAll('tr:not(.no-results-row)');
          const noResultsRow = tableBody.querySelector('.no-results-row');

          filterInput.addEventListener('input', (e) => {
            // Get the user's search term, and make it lowercase for case-insensitive matching
            const searchTerm = e.target.value.toLowerCase();
            let visibleRows = 0; // Keep track of matching rows

            // Loop through all the data rows in the table
            tableRows.forEach(row => {
              // Get the text content of the row, also lowercase
              const rowText = row.textContent.toLowerCase();

              // If the row's text includes the search term, show it. Otherwise, hide it.
              if (rowText.includes(searchTerm)) {
                row.style.display = ''; // Resets the style to the default (e.g., 'table-row')
                visibleRows++;
              } else {
                row.style.display = 'none';
              }
            });

            // NEW: Show or hide the "no results" message based on the count
            if (noResultsRow) {
              if (visibleRows === 0) {
                noResultsRow.style.display = 'table-row';
              } else {
                noResultsRow.style.display = 'none';
              }
            }
          });
        }

      const printButton = document.getElementById('print-exhibit-button');

      if (printButton) {
          printButton.addEventListener('click', () => {
              // This simple command opens the browser's print dialog
              window.print();
          });
      }

// --- 5. IN-PAGE SEARCH FUNCTIONALITY ---
const searchInput = document.getElementById('in-page-search-input');
const searchTarget = document.querySelector('.exhibit-content'); // We only search inside the article

// Only run this code if the search input and target exist on the page
if (searchInput && searchTarget) {
    const markInstance = new Mark(searchTarget);
    const prevButton = document.getElementById('in-page-search-prev');
    const nextButton = document.getElementById('in-page-search-next');
    const countEl = document.getElementById('in-page-search-count');
    
    let currentMatch = 0;
    let totalMatches = 0;

    const jumpTo = (index) => {
        const highlights = document.querySelectorAll('.in-page-highlight');
        if (highlights.length > 0) {
            // Remove 'current' class from the old match
            document.querySelector('.current-match')?.classList.remove('current-match');
            
            // Add 'current' class to the new match
            const currentEl = highlights[index];
            currentEl.classList.add('current-match');
            currentEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    };

    const performSearch = () => {
        const keyword = searchInput.value;
        currentMatch = 0;
        
        markInstance.unmark({
            done: () => {
                if (keyword.length > 2) { // Only search for terms longer than 2 characters
                    markInstance.mark(keyword, {
                        element: 'mark',
                        className: 'in-page-highlight',
                        done: (count) => {
                            totalMatches = count;
                            countEl.textContent = totalMatches > 0 ? `1 / ${totalMatches}` : '0 / 0';
                            prevButton.disabled = totalMatches <= 1;
                            nextButton.disabled = totalMatches <= 1;
                            if (totalMatches > 0) {
                                jumpTo(0);
                            }
                        }
                    });
                } else {
                    totalMatches = 0;
                    countEl.textContent = '0 / 0';
                    prevButton.disabled = true;
                    nextButton.disabled = true;
                }
            }
        });
    };

    searchInput.addEventListener('input', performSearch);
    
    nextButton.addEventListener('click', () => {
        if (totalMatches > 0) {
            currentMatch = (currentMatch + 1) % totalMatches;
            countEl.textContent = `${currentMatch + 1} / ${totalMatches}`;
            jumpTo(currentMatch);
        }
    });

    prevButton.addEventListener('click', () => {
        if (totalMatches > 0) {
            currentMatch = (currentMatch - 1 + totalMatches) % totalMatches;
            countEl.textContent = `${currentMatch + 1} / ${totalMatches}`;
            jumpTo(currentMatch);
        }
    });
}

    // --- REVIEWED CHECKBOX FUNCTIONALITY (WORKS ON ALL PAGES) ---

    const reviewedCheckboxes = document.querySelectorAll('.reviewed-checkbox');

    if (reviewedCheckboxes.length > 0) {
        
        // Use a global and unique site identifier for the storage key.
        // This is more robust than using a case number that might only exist on one page.
        // The Nunjucks filter `slugify` is safer than `slug`.
        const storageKey = 'reviewedExhibits_undefined';

        const getReviewedData = () => {
            const data = localStorage.getItem(storageKey);
            return data ? JSON.parse(data) : {};
        };

        const saveReviewedData = (data) => {
            localStorage.setItem(storageKey, JSON.stringify(data));
        };

        const reviewedData = getReviewedData();

        reviewedCheckboxes.forEach(checkbox => {
            const exhibitId = checkbox.dataset.exhibitId;

            // 1. SET INITIAL STATE: This works for the one checkbox on the exhibit page
            // or the 2000+ on the index page.
            if (reviewedData[exhibitId]) {
                checkbox.checked = true;
            }

            // 2. ADD EVENT LISTENER: This listener is added to every single
            // .reviewed-checkbox element found on the current page.
            checkbox.addEventListener('change', () => {
                const currentData = getReviewedData();
                
                if (checkbox.checked) {
                    currentData[exhibitId] = true;
                } else {
                    delete currentData[exhibitId];
                }

                saveReviewedData(currentData);
            });
        });
    }


    // --- 3. BACK TO TOP BUTTON FUNCTIONALITY ---
    // Find the button in the DOM
    const backToTopButton = document.getElementById('back-to-top');

    // Only set up the listener if the button was found
    if (backToTopButton) {
        // Listen for scroll events on the window
        window.addEventListener('scroll', () => {
            // If the user has scrolled more than 300px down...
            if (window.scrollY > 300) {
                // ...make the button visible.
                backToTopButton.style.display = 'block';
            } else {
                // ...otherwise, hide it.
                backToTopButton.style.display = 'none';
            }
        });
    }


      });
      
    </script>

<script>
window.addEventListener('DOMContentLoaded', (event) => {
    
    // This script contains ALL logic for the homepage (filtering, checkboxes, batch open)
    // and is designed to run safely without errors on other pages.

    const exhibitTableBody = document.querySelector('.exhibit-table-body');
    const storageKey = 'reviewedExhibits_undefined';

    // --- MAIN LOGIC FOR THE HOMEPAGE (WHERE THE TABLE EXISTS) ---
    if (exhibitTableBody) {
        
        // 1. GATHER ALL DOM ELEMENTS
        // ------------------------------------
        const textFilterInput = document.getElementById('exhibit-filter');
        const statusFilter = document.getElementById('status-filter');
        const openBtn = document.getElementById('open-unreviewed-btn');
        const exhibitDataElement = document.getElementById('exhibit-data');

        const allTableRows = exhibitTableBody.querySelectorAll('tr:not(.no-results-row)');
        const noResultsRow = exhibitTableBody.querySelector('.no-results-row');
        const reviewedCheckboxes = document.querySelectorAll('.reviewed-checkbox');

        // This is the full list of all exhibits from our hidden JSON data
        const allExhibits = JSON.parse(exhibitDataElement.textContent);
        const TABS_TO_OPEN = 30;
        
        // 2. DEFINE HELPER FUNCTIONS
        // ------------------------------------

        // Gets the reviewed data object from localStorage
        const getReviewedData = () => {
            const data = localStorage.getItem(storageKey);
            return data ? JSON.parse(data) : {};
        };
        
        // Saves the reviewed data object to localStorage
        const saveReviewedData = (data) => {
            localStorage.setItem(storageKey, JSON.stringify(data));
        };

        // This function updates the batch open button's text and state
        const updateOpenBatchButtonState = () => {
            const reviewedData = getReviewedData();
            const unreviewedExhibits = allExhibits.filter(
                exhibit => !reviewedData[exhibit.id]
            );
            const unreviewedCount = unreviewedExhibits.length;

            if (unreviewedCount === 0) {
                openBtn.textContent = 'All Exhibits Reviewed';
                openBtn.disabled = true;
            } else {
                const countToOpen = Math.min(unreviewedCount, TABS_TO_OPEN);
                openBtn.textContent = `Open ${countToOpen} Unreviewed`;
                openBtn.disabled = false;
            }
        };

        // The unified function to filter table rows based on text and status
        const filterTableRows = () => {
            const searchTerm = textFilterInput.value.toLowerCase();
            const statusValue = statusFilter.value;
            const reviewedData = getReviewedData();
            let visibleRows = 0;

            allTableRows.forEach(row => {
                const textMatch = row.textContent.toLowerCase().includes(searchTerm);
                const checkbox = row.querySelector('.reviewed-checkbox');
                const exhibitId = checkbox.dataset.exhibitId;
                const isReviewed = exhibitId && reviewedData[exhibitId];
                
                let statusMatch = false;
                if (statusValue === 'all') statusMatch = true;
                else if (statusValue === 'reviewed') statusMatch = isReviewed;
                else if (statusValue === 'unreviewed') statusMatch = !isReviewed;

                if (textMatch && statusMatch) {
                    row.style.display = '';
                    visibleRows++;
                } else {
                    row.style.display = 'none';
                }
            });
            noResultsRow.style.display = visibleRows === 0 ? 'table-row' : 'none';
        };

        // 3. SET UP EVENT LISTENERS & INITIAL STATE
        // ------------------------------------

        // Initialize checkboxes and add a SINGLE event listener for changes
        const reviewedDataOnLoad = getReviewedData();
        reviewedCheckboxes.forEach(checkbox => {
            const exhibitId = checkbox.dataset.exhibitId;
            if (reviewedDataOnLoad[exhibitId]) {
                checkbox.checked = true;
            }

            checkbox.addEventListener('change', () => {
                const currentData = getReviewedData();
                if (checkbox.checked) {
                    currentData[exhibitId] = true;
                } else {
                    delete currentData[exhibitId];
                }
                saveReviewedData(currentData);
                
                // When a checkbox changes, update EVERYTHING
                filterTableRows();
                updateOpenBatchButtonState();
            });
        });
        
        // Add event listeners for the filters
        textFilterInput.addEventListener('input', filterTableRows);
        statusFilter.addEventListener('change', filterTableRows);

        // Add the click event listener for the batch open button
        openBtn.addEventListener('click', () => {
            const reviewedData = getReviewedData();
            const unreviewedExhibits = allExhibits.filter(exhibit => !reviewedData[exhibit.id]);
            const countToOpen = Math.min(unreviewedExhibits.length, TABS_TO_OPEN);

            if (countToOpen === 0) return;

            const confirmed = confirm(`This will open ${countToOpen} unreviewed exhibits in new tabs.\n\nYour browser may ask for permission. Continue?`);
            if (confirmed) {
                unreviewedExhibits.slice(0, countToOpen).forEach(exhibit => {
                    window.open(exhibit.url, '_blank', 'noopener');
                });
            }
        });

        // 4. RUN INITIALIZATION FUNCTIONS ON PAGE LOAD
        // ------------------------------------
        filterTableRows();
        updateOpenBatchButtonState();
    }

    // --- LOGIC FOR INDIVIDUAL EXHIBIT PAGES ---
    // This logic runs independently from the homepage logic.
    const exhibitPageCheckbox = document.querySelector('.exhibit-meta .reviewed-checkbox');
    if (exhibitPageCheckbox) {
        const getReviewedData = () => JSON.parse(localStorage.getItem(storageKey) || '{}');
        const saveReviewedData = (data) => localStorage.setItem(storageKey, JSON.stringify(data));
        
        const exhibitId = exhibitPageCheckbox.dataset.exhibitId;
        const reviewedData = getReviewedData();

        if (reviewedData[exhibitId]) {
            exhibitPageCheckbox.checked = true;
        }

        exhibitPageCheckbox.addEventListener('change', () => {
            const currentData = getReviewedData();
            if (exhibitPageCheckbox.checked) {
                currentData[exhibitId] = true;
            } else {
                delete currentData[exhibitId];
            }
            saveReviewedData(currentData);
        });
    }

    // --- KEYBOARD SHORTCUTS & EFFICIENCY LOGIC (FOR EXHIBIT PAGES) ---
    // This entire block will only run if we're on a page with exhibit navigation.
    const exhibitNav = document.querySelector('.exhibit-nav');
    if (exhibitNav) {
        
        // --- 1. Define UI elements and helpers ---
        const checkbox = document.querySelector('.exhibit-meta .reviewed-checkbox');
        const nextLink = document.querySelector('.nav-next a');
        const prevLink = document.querySelector('.nav-previous a');
        const toastElement = document.getElementById('toast-notification');
        let toastTimeout;

        // Function to show a temporary message
        const showToast = (message) => {
            clearTimeout(toastTimeout);
            toastElement.textContent = message;
            toastElement.classList.add('show');
            toastTimeout = setTimeout(() => {
                toastElement.classList.remove('show');
            }, 2000); // Message disappears after 2 seconds
        };
        
        // --- 2. Add the master keyboard event listener ---
        window.addEventListener('keydown', (e) => {
            // IMPORTANT: Don't trigger shortcuts if the user is typing in an input field!
            if (['INPUT', 'TEXTAREA', 'SELECT'].includes(document.activeElement.tagName)) {
                return;
            }

            // --- 3. Handle the shortcuts ---

            // Shortcut: Toggle Reviewed Status (Shift + R)
            if (e.shiftKey && e.key.toLowerCase() === 'r') {
                e.preventDefault(); // Prevent typing 'R' if something else is focused
                if (!checkbox) return;
                
                // Toggle the checkbox's state
                checkbox.checked = !checkbox.checked;
                // Manually trigger the 'change' event to save the state to localStorage
                checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                
                showToast(checkbox.checked ? 'Marked as Reviewed' : 'Marked as Unreviewed');
            }

            // Shortcut: Mark as Reviewed AND go to Next (Shift + N)
            if (e.shiftKey && e.key.toLowerCase() === 'n') {
                e.preventDefault();
                if (!checkbox || !nextLink) return;

                // Only mark as reviewed, don't un-mark
                if (!checkbox.checked) {
                    checkbox.checked = true;
                    checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                }
                
                // Navigate to the next exhibit
                nextLink.click();
            }

            // Shortcut: Navigate to Previous Exhibit (Left Arrow)
            if (e.key === 'ArrowLeft') {
                e.preventDefault();
                if (prevLink) {
                    prevLink.click();
                }
            }
            
            // Shortcut: Navigate to Next Exhibit (Right Arrow)
            if (e.key === 'ArrowRight') {
                e.preventDefault();
                if (nextLink) {
                    nextLink.click();
                }
            }
        });
    }




});
</script>

    <a href="#" id="back-to-top" class="back-to-top" title="Back to top">↑</a>
    <div id="toast-notification" class="toast"></div>

	</body>
</html>